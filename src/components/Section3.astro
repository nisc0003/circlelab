---
//@ts-nocheck
import Eventcard from "../components/Card.astro";
import arrowright from "../images/arrow_card_right.svg";
import arrowleft from "../images/arrow_card_left.svg";
import img1 from "../images/event1.webp";
import img2 from "../images/event2.webp";
import img3 from "../images/event3.webp";
import "../css/card.css";

const url = "https://svsblnghypojkwpyajnm.supabase.co/rest/v1/events";
const key =
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN2c2JsbmdoeXBvamt3cHlham5tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNTMzNjgsImV4cCI6MjA1OTkyOTM2OH0.GjC9pG1mZOeGjvvrBiQOMZR1J9aKpJlSrSYNkjKafQQ";

const options = {
  headers: { apikey: key },
};
const data = await fetch(url, options).then((res) => res.json());
const images = [
  "/src/images/event1.webp",
  "/src/images/event2.webp",
  "/src/images/event3.webp",
];
---

<article>
  <section class="section_events">
    <h2>Upcomming Events</h2>
    <h3>Med Cirkular Lab</h3>
    <div class="cards_container">
      <button class="card_arrow left_arrow">
        <img src={arrowleft.src} alt="gå til venstre" />
      </button>
      <div class="cards_layout">
        {
          data.map((event, index) => (
            <div class="event_card">
              <Eventcard
                event={event}
                billede={images[index % images.length]}
                billedebeskrivelse="billede af arrangement"
                afholder="CIRCULAR LAB"
              />
            </div>
          ))
        }
      </div>
      <button class="card_arrow right_arrow">
        <img src={arrowright.src} alt="gå til højre" />
      </button>
    </div>
  </section>
</article>

<style>
  .section_events {
    padding-right: 60px;
    padding-left: 60px;
    background: var(--primary);
    padding-bottom: 100px;
  }
</style>
